<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:ice="http://www.icesoft.com/icefaces/component"
      xmlns:f="http://java.sun.com/jsf/core">

    <ui:composition template="/templates/main.xhtml">
        <ui:define name="content">
            <ice:panelLayout>
                <ice:form>
                    <ice:outputText value="#{indexBean.foreignResidence}" />
                    <ice:commandButton id="toggleModal" value="ABRIR POPUP" actionListener="#{indexBean.toggleOpened}" />


                    <ice:panelPopup id="modalPnlBanco" styleClass="bfPopup"
                                    draggable="false" modal="true"
                                    visible="#{indexBean.modalOpened}"
                                    autoCentre="true">
                        <f:facet name="header">
                            <ice:panelGroup styleClass="popupHeaderWrapper">
                                <ice:outputText
                                    value="De acuerdo al último reglamento publicado por el Ministerio de Hacienda, debemos realizar las siguientes preguntas para que pueda invertir en nuestros canales"
                                    styleClass="popupHeaderText"/>
                            </ice:panelGroup>
                        </f:facet>
                        <f:facet name="body">
                            <ice:panelGroup styleClass="popupBodyWrapper">
                                <ice:panelGroup id="modalMessages" styleClass="modalMessages errorMessage">
                                    <ice:outputText value="Debes aceptar los términos y condiciones para continuar"/>
                                </ice:panelGroup>
                                <ice:panelGroup id="foreignResidenceQuestion">
                                    <ice:outputText styleClass="question infoIcon" value="¿Tienes residencia tributaria en el extranjero?"/>
                                    <ice:panelGroup styleClass="selectDiv">
                                        <ice:selectOneMenu id="foreignResidence" value="#{indexBean.foreignResidence}" partialSubmit="true">
                                            <f:selectItem itemValue="false" itemLabel="No" />
                                            <f:selectItem itemValue="true" itemLabel="Sí" />
                                        </ice:selectOneMenu>
                                    </ice:panelGroup>
                                </ice:panelGroup>
                                <ice:panelGrid cellpadding="0" cellspacing="0" columns="2" styleClass="foreignResidenceYes" rendered="#{indexBean.foreignResidence}">
                                    <ice:outputText styleClass="question" value="Selecciona País"/>
                                    <ice:panelGroup styleClass="selectDiv">
                                        <ice:selectOneMenu id="foreignResidenceCountry" value="#{indexBean.frCountry}" converter="BaseBeanConverter">
                                            <f:selectItems value="#{indexBean.countries}" var="c" itemLabel="#{c.label}" itemValue="#{c.value}"/>
                                        </ice:selectOneMenu>
                                    </ice:panelGroup>
                                    <ice:outputText styleClass="question infoIcon" value="Ingresa número de identificación tributario del país extranjero"/>
                                    <ice:inputText styleClass="tinInput" value="#{indexBean.frTin}" />
                                </ice:panelGrid>

                                <ice:panelGroup styleClass="termsAndConditions">
                                    <ice:selectBooleanCheckbox value="#{indexBean.acceptConditions}" />
                                    <ice:outputText value="Declaro conocer y aceptar los términos y condiciones"/>
                                </ice:panelGroup>
                                <ice:commandButton styleClass="modalPnlCloseButton" type="submit"
                                                   value="Continuar"
                                                   actionListener="#{indexBean.toggleOpened}"/>
                            </ice:panelGroup>
                        </f:facet>
                    </ice:panelPopup>
                </ice:form>
            </ice:panelLayout>
        </ui:define>
    </ui:composition>
</html>